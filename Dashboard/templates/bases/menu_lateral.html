{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}{% endblock %}</title>

        <!--css-->
        {% block head %}
        {% endblock %}
        
        {% block css %}
        {% endblock %}
        <link rel="stylesheet" href="{% static 'style\pages\dashboard\menu.css' %}">
    </head>
    <body>
        <!--aside bar-->
        <nav class="navbar" style="background-color: #1D267D;">      
            <div class="navbar-container">
                <!--logo div-->
                <div class="navbar-logo-div">

                    {% if request.path == '/dashboard/' %}
                    <a class="navbar-logo-link" href="{% url 'homepage' %}">
                    {% else %}
                    <a class="navbar-logo-link" href="{% url 'Dashboard:index_estacao' %}">
                    {% endif %}
                        <img class="navbar-logo-img" src="{% static 'images\global\logo_academy\logo-academy.png' %}" alt="logo" width="170px"></a>
                    <button class="navbar-toggler"><img class="navbar-toggler-img" src="{% static 'images\pages\dashboard\index_dashboard\svg\menu.svg' %}" alt="menu-toggler"></button>
                </div>

                <!--search input-->
               

                <!--item list-->
                <ul class="menu-list">   
                    <li class="menu-item">                        
                        <a class="menu-link" href="#"> 
                            <img src="{% static 'images\pages\dashboard\index_dashboard\svg\grid.svg' %}" title="Dashboard" class="menu-icon" alt="grid">
                            <span class="menu-link-text" style="color: white">Dashboard</span>                            
                        </a>
                    </li>
                    <li class="menu-item">                        
                        <a class="menu-link" class="menu-link" href="#">
                            <img src="{% static 'images\pages\dashboard\index_dashboard\svg\user.svg' %}" title="Clientes" class="menu-icon" alt="user">
                            <span class="menu-link-text" style="color: white">Alunos</span>    
                        </a>
                    </li>
                </ul>
            </div>

            <!--div user info-->
            <div class="user-container" style="background-color: #1D267D;">
                <div class="user-info">
                    <img class="user-img" src="" alt="photo">
                    <div class="user-details">
                        {% if request.user.get_full_name|length > 30 %}
                        <h5 class="user-name" style="color: white">{{ request.user.get_full_name|slice:"30" }}</h5>
                        {% else %}
                        <h5 class="user-name" style="color: white">{{ request.user.get_full_name }}</h5>
                        {% endif %}

                        {% if request.user.is_staff and request.user.first_name == "Vanessa" %}
                        <p class="user-occupation" style="color: white">Professora Van</p>
                        {% elif request.user.is_superuser and request.user.first_name == "Mauro" %}
                        <p class="user-occupation" style="color: white">Professor Mauro</p>
                        {% elif request.user.is_staff %}
                        <p class="user-occupation" style="color: white">Admin</p>
                        {% else %}
                        <p class="user-occupation" style="color: white">{{ request.user.groups.all|join:", " }}</p>
                        {% endif %}

                    </div>
                </div>
                <a class="logout-btn" href="{% url 'account_logout' %}">
                    <img class="logout-img" src="{% static 'images\pages\dashboard\index_dashboard\svg\log-out.svg' %}" alt="logout">
                </a>
            </div>
        </nav>
{% block content %}
{% endblock %}
</body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', () => {
    // Seleciona o bot達o de toggler e o menu lateral
    const navbarToggler = document.querySelector('.navbar-toggler');
    const navbar = document.querySelector('.navbar');
    const dashboard = document.querySelector('.dashboard'); // Painel principal para ajustar margens

    if (navbarToggler && navbar) {
        // Adiciona um evento de clique ao bot達o
        navbarToggler.addEventListener('click', () => {
            navbar.classList.toggle('active'); // Alterna a classe 'active' no menu lateral
            
            // Ajusta a margem do dashboard se ele existir
            if (dashboard) {
                if (navbar.classList.contains('active')) {
                    dashboard.style.marginLeft = "250px"; // Ajuste de acordo com o valor na CSS
                } else {
                    dashboard.style.marginLeft = "60px"; // Valor padr達o quando fechado
                }
            }
        });
    } else {
        console.error('Navbar toggler ou navbar n達o foram encontrados no DOM.');
    }

    // Fecha o menu ao clicar fora dele (opcional, para uma melhor UX)
    document.addEventListener('click', (event) => {
        if (
            navbar.classList.contains('active') &&
            !navbar.contains(event.target) &&
            !navbarToggler.contains(event.target)
        ) {
            navbar.classList.remove('active');
            if (dashboard) {
                dashboard.style.marginLeft = "60px"; // Retorna ao estado fechado
            }
        }
    });
});


</script>
{% block js %}
{% endblock %}